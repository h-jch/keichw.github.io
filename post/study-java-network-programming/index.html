<!DOCTYPE html>
<html lang="zh-hans">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.73.0" />



<link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/favicon-16x16.png" />
<link rel="manifest" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/site.webmanifest" />
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/safari-pinned-tab.svg" color="#8aa2d3" />
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/favicon.ico" />
<meta name="msapplication-TileColor" content="#8aa2d3" />
<meta name="msapplication-config" content="https://cdn.jsdelivr.net/gh/amzrk2/poal-jsdelivr@1.6.0/favicons/browserconfig.xml" />
<meta name="theme-color" content="#ffffff" />


<title>Java网络编程笔记 - Kinopio BLOG</title>


<meta name="author" content="Kinopio" />


<meta name="description" content="A minimal Hugo theme with nice theme color." />


<meta name="keywords" content="java, network" />

<meta property="og:title" content="Java网络编程笔记" />
<meta property="og:description" content="1 IP地址
使用java的类InetAddress" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://keichw.github.io/post/study-java-network-programming/" />
<meta property="og:image" content="https://keichw.github.io/img/og.png"/>
<meta property="article:published_time" content="2020-07-22T23:08:11+08:00" />
<meta property="article:modified_time" content="2020-07-22T23:08:11+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://keichw.github.io/img/og.png"/>

<meta name="twitter:title" content="Java网络编程笔记"/>
<meta name="twitter:description" content="1 IP地址
使用java的类InetAddress"/>



<style>
    @media (prefers-color-scheme: dark) {
        body[data-theme='auto'] img {
            filter: brightness(60%);
        }
    }

    body[data-theme='dark'] img {
        filter: brightness(60%);
    }
</style>


<link rel="stylesheet" href="/assets/css/fuji.min.css" />






</head>

<body data-theme="auto">
    <script data-cfasync="false">
    
    var fujiThemeData = localStorage.getItem('fuji_data-theme');
    
    if (!fujiThemeData) {
        localStorage.setItem('fuji_data-theme', 'auto');
    } else {
        
        if (fujiThemeData !== 'auto') {
            document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
        }
    }
</script>
<script data-cfasync="false">
    
    function browserDetection(ua) {
        if (ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0) {
            return true;
        }
        return false;
    }

    var ua = window.navigator.userAgent;
    if (browserDetection(ua)) {
        window.location.href('https:\/\/keichw.github.io\/ie\/');
    }
</script>
    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="https://keichw.github.io">Kinopio BLOG</a>
            
            <span class="title-sub">(ง •̀_•́)ง</span>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="https://keichw.github.io/post/study-java-network-programming/">Java网络编程笔记</a>
    </h2>
    <div class="post-item post-meta">
        <span><ion-icon name="today"></ion-icon>&nbsp;2020-07-22</span><span><ion-icon name="file-tray"></ion-icon>&nbsp;1376 字</span><span><ion-icon name="stopwatch"></ion-icon>&nbsp;3 分钟</span><span><ion-icon name="pricetags"></ion-icon>&nbsp;<a href="/tags/java">java</a>&nbsp;<a href="/tags/network">network</a>&nbsp;</span>
    </div>
    
    
    <div class="post-content markdown-body">
        <h2 id="1-ip地址">1 IP地址</h2>
<p>使用java的类InetAddress</p>
<pre><code class="language-java">public class TestInetAddress {
    public static void main(String[] args) {
        try {
            //本机地址
            InetAddress inetAddress1 = InetAddress.getByName(&quot;127.0.0.1&quot;);
            System.out.println(inetAddress1);
            InetAddress inetAddress2 = InetAddress.getByName(&quot;localhost&quot;);
            System.out.println(inetAddress2);
            InetAddress inetAddress3 = InetAddress.getLocalHost();
            System.out.println(inetAddress3);
            //网站地址
            InetAddress inetAddress4 = InetAddress.getByName(&quot;www.baidu.com&quot;);
            System.out.println(inetAddress4);
            //常用方法
            System.out.println(inetAddress4.getAddress());
            System.out.println(inetAddress4.getCanonicalHostName());
            System.out.println(inetAddress4.getHostAddress());
            System.out.println(inetAddress4.getHostName());
        } catch (UnknownHostException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 id="2-端口">2 端口</h2>
<p>端口表示计算机上的程序的一个进程</p>
<ul>
<li>0 ~ 65535</li>
<li>不同进程不同端口号，不能冲突</li>
<li>TCP和UDP有各自的端口号，不冲突</li>
</ul>
<pre><code class="language-java">public class TestInetSocketAddress {
    public static void main(String[] args) {
        InetSocketAddress socketAddress1 = new InetSocketAddress(&quot;127.0.0.1&quot;, 8080);
        InetSocketAddress socketAddress2 = new InetSocketAddress(&quot;localhost&quot;, 8080);
        System.out.println(socketAddress1);
        System.out.println(socketAddress2);
        
        System.out.println(socketAddress1.getAddress());
        System.out.println(socketAddress1.getHostName());
        System.out.println(socketAddress1.getPort());
    }
}
</code></pre>
<h2 id="3-通信协议">3 通信协议</h2>
<ul>
<li>TCP
<ul>
<li>连接，稳定</li>
<li>三次握手，四次挥手</li>
<li>客户端与服务端之间</li>
<li>传输完成，释放连接，效率低</li>
</ul>
</li>
<li>UDP
<ul>
<li>不连接，不稳定</li>
<li>客户端与服务端没有明确的界限</li>
<li>不管有没有准备好都可以发送</li>
</ul>
</li>
</ul>
<h2 id="4-tcp">4 TCP</h2>
<p>客户端</p>
<ol>
<li>连接服务器 Socket</li>
<li>发送消息</li>
</ol>
<p>服务端</p>
<ol>
<li>建立服务的端口 ServerSocket</li>
<li>等待用户的连接 accept</li>
<li>接收消息</li>
</ol>
<pre><code class="language-java">//客户端
public class TcpClientDemo {
    public static void main(String[] args) {
        Socket socket = null;
        OutputStream os = null;
        try {
            //获取服务器的地址，端口号
            InetAddress serverIP = InetAddress.getByName(&quot;127.0.0.1&quot;);
            int port = 8888;
            //创建socket连接
            socket = new Socket(serverIP, port);
            //发送消息
            os = socket.getOutputStream();
            os.write(&quot;test connection&quot;.getBytes());
        } catch (EXception e) {
            e.printStackTrace();
        } finally {
            if (os != null) {
                try {
                    os.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<pre><code class="language-java">//服务端
public class TcpServerDemo {
    public static void main(String[] args) {
        ServerSocket serverSocket = null;
        Socket socket = null;
        InputStream is = null;
        ByteArrayOutputStream baos = null;
        try {
            //设定服务器的地址
            serverSocket = new ServerSocket(8888);
            //等待客户端连接
            socket = serverSocket.accept();
            //读取客户端的消息
            is = socket.getInputStream();
            //管道流
            baos = new ByteArrayOutputStream();
            byte[] buffer = new byte[1024];
            int len;
            while ((len = is.read(buffer)) != -1) {
                baos.write(buffer, 0, len);
            }
            System.out.println(baos.toString());
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            //关闭资源
            if (baos != null) {
                try {
                    baos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (serverSocket != null) {
                try {
                    serverSocket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>
<h2 id="5-tcp实现文件上传">5 TCP实现文件上传</h2>
<pre><code class="language-java">public class TcpClientDemo {
    public static void main(String[] args) throws Exception {
        //创建Socket连接
        Socket socket = new Socket(InetAddress.getByName(&quot;127.0.0.1&quot;), 9999);
        //创建输出流
        OutputStream os = socket.getOutputStream();
        //读取文件
        FileInputStream fis = new FileInputStream(new File(&quot;test.jpg&quot;));
        //写出文件
        byte[] buffer = new byte[1024];
        int len;
        while ((len = fis.read(buffer)) != -1) {
            os.write(buffer, 0, len);
        }
        
        //通知服务器传输结束
        socket.shutdownOutput();
        
        //确定服务端接收完毕才能断开连接
        InputStream is = socket.getInputStream();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer2 = new byte[1024];
        int len2;
        while ((len2 = is.read(buffer2)) != -1) {
            baos.write(buffer2, 0, len2);
        }
        System.out.println(baos.toString());
        
        //关闭资源
        baos.close();
        is.close()
        fis.close();
        os.close();
        socket.close();
    }
}
</code></pre>
<pre><code class="language-java">public class TcpServerDemo {
    public static void main(String[] args) throws Exception {
        //创建端口
        ServerSocket serverSocket = new ServerSocket(9999);
        //监听客户端连接
        Socket socket = serverSocket.accept();	//阻塞式监听，会一直等待客户端连接
        //获取输入流
        InputStream is = socket.getInputStream();
        //文件输出
        FileOutputStream fos = new FileOutputSteam(new File(&quot;receive.jpg&quot;));
        byte[] buffer = new byte[1024];
        int len;
        while ((len = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len);
        }
        
        //通知客户端接收完毕
        OutputStream os = socket.getOutputStream();
        os.write(&quot;over&quot;.getBytes());
        
        //关闭资源
        fos.close();
        is.close();
        socket.close();
        serverSocket.close();
    }
}
</code></pre>
<h2 id="6-udp">6 UDP</h2>
<p>UDP没有客户端和服务端区分，这里只是方便显示</p>
<pre><code class="language-java">public class UdpClientDemo {
    public static void main(String[] args) throws Exception {
        //建立Socket
        DatagramSocket socket = new DatagramSocket();
        //建个包
        String msg = &quot;test&quot;;
        InetAddress ip = InetAddress.getByName(&quot;127.0.0.1&quot;);
        int port = 9000;
        //数据，数据长度，接收方ip和端口
        DatagramPacket packet = new DatagramPacket(msg.getBytes(), 0, msg.getBytes().length, ip, port);
        //发送包
        socket.send(packet);
        //关闭资源
        socket.close();
    }
}
</code></pre>
<pre><code class="language-java">public class UdpServerDemo {
    public static void main(String[] args) {
        //开放端口
        DatagramSocket socket = new DatagramSocket(9000);
        //接收数据包
        byte[] buffer = new byte[1024];
        DatagramPacket packet = new DatagramPacket(buffer, 0, buffer.length);
        socket.receive(packet);
        System.out.println(new String(packet.getData(), 0, packet.getLength()));
        //关闭资源
        socket.close();
    }
}
</code></pre>
<h2 id="7-udp实现聊天">7 UDP实现聊天</h2>
<pre><code class="language-java">public class UdpSenderDemo {
    public static void main(String[] args) throws Exception {
        DatagramSocket socket = new DatagramSocket(8888);
        //准备数据，控制台读取System.in
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        while (true) {
            String data = reader.readLine();
            byte[] datas = data.getBytes();
            DatagramPacket packet = new DatagramPacket(datas, 0, datas.length, new InetSocketAddress(&quot;127.0.0.1&quot;, 9999));
            socket.send(packet);
            
            if (data.trim().equals(&quot;bye&quot;)) {
                break;
            }
        }
        
        socket.close();
    }
}
</code></pre>
<pre><code class="language-java">public class UdpReceiveDemo {
    public static void main(String[] args) throws Exception {
        DatagramSocket socket = new DatagramSocket(9999);
        while (true) {
            //准备接收数据
            byte[] container = new byte[1024];
            DatagramPacket packet = new DatagramPacket(container, 0, container.length);
            socket.receive(packet);
            
            //断开连接
            byte[] data = packet.getData();
            String receiveData = new String(data, 0, data.length);
            System.out.println(receiveData);
            
            if (receiveData.trim().equals(&quot;bye&quot;)) {
                break;
            }
        }
        
    }
}
</code></pre>
<p>如果要实现发送的同时可以接收信息，那么双方都要建立两个线程，一个负责发送，一个负责接收</p>
<h2 id="8-url">8 URL</h2>
<p>统一资源定位符</p>
<ul>
<li>协议://ip地址:端口/项目名/资源</li>
</ul>
<pre><code class="language-java">public class URLDemo {
    public static void main(String[] args) throws MalformedURLException {
        URL url = new URL(&quot;http://localhost:8080/test/index.html?a=1&amp;b=2&quot;);
        System.out.println(url.getProtocol());	//协议
        System.out.println(url.getHost());	//主机ip
        System.out.println(url.getPort());	//端口
        System.out.println(url.getPath());	//文件
        System.out.println(url.getFile());	//全路径
        System.out.println(url.getQuery());	//参数
    }
}
</code></pre>
<p>利用URL下载网络资源</p>
<pre><code class="language-java">public class URLDownload {
    public static void main(String[] args) throws Exception {
        URL url = new URL(&quot;http://localhost:8080/test/test.txt&quot;);
        //连接到资源
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        
        InputStream is = urlConnection.getInputStream();
        FileOutputStream fos = new FileOutputStream(&quot;receive.txt&quot;);
        
        byte[] buffer = new byte[1024];
        int len;
        while ((len = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len);
        }
        
        fos.close();
        is.close();
        urlConnection.close();
    }
}
</code></pre>
    </div>
</article>


<div class="license markdown-body">
    <blockquote>
        <p>除特殊注明部分，本站内容采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"
               target="_blank">CC BY-NC-SA 4.0</a> 进行许可。</p>
    </blockquote>
</div>



            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    
    
    <div class="sidebar-item sidebar-toc">
        <h3>目录</h3>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-ip地址">1 IP地址</a></li>
    <li><a href="#2-端口">2 端口</a></li>
    <li><a href="#3-通信协议">3 通信协议</a></li>
    <li><a href="#4-tcp">4 TCP</a></li>
    <li><a href="#5-tcp实现文件上传">5 TCP实现文件上传</a></li>
    <li><a href="#6-udp">6 UDP</a></li>
    <li><a href="#7-udp实现聊天">7 UDP实现聊天</a></li>
    <li><a href="#8-url">8 URL</a></li>
  </ul>
</nav>
    </div>
    
    
    
    <div class="sidebar-item sidebar-pages">
        <h3>页面</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/archives/">Archives</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
            <li>
                <a href="/search/">Search</a>
            </li>
            
            <li>
                <a href="/index.xml">RSS</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>标签</h3>
        <div>
            
            <span>
                <a href="/tags/c&#43;&#43;/">c&#43;&#43;</a>
            </span>
            
            <span>
                <a href="/tags/java/">java</a>
            </span>
            
            <span>
                <a href="/tags/jdbc/">jdbc</a>
            </span>
            
            <span>
                <a href="/tags/mybatis/">mybatis</a>
            </span>
            
            <span>
                <a href="/tags/network/">network</a>
            </span>
            
            <span>
                <a href="/tags/servlet/">servlet</a>
            </span>
            
            <span>
                <a href="/tags/spring/">spring</a>
            </span>
            
            <span>
                <a href="/tags/springmvc/">springmvc</a>
            </span>
            
            <span>
                <a href="/tags/web/">web</a>
            </span>
            
            <span>
                <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
            </span>
            
            <span>
                <a href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
            </span>
            
        </div>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>链接</h3>
        <ul>
            
            <li>
                <a href="https://github.com/keichw" target="_blank"><span>GitHub</span></a>
            </li>
            
        </ul>
    </div>
    
</aside>
        </div>
        <div class="btn">
    <div class="btn-toggle-mode">
        <ion-icon name="contrast"></ion-icon>
    </div>
    <div class="btn-scroll-top">
        <ion-icon name="chevron-up"></ion-icon>
    </div>
</div>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            <span>&copy; 2020 <a href="https://keichw.github.io">Kinopio</a> |
                基于 <a href="https://github.com/amzrk2/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> & <a href="https://gohugo.io/"
                   target="_blank">Hugo</a> 构建</span>
        </div>
    </div>
</footer>
    
    <script async type="module" src="https://cdn.jsdelivr.net/npm/ionicons@5.0.1/dist/ionicons/ionicons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/ionicons@5.0.1/dist/ionicons/ionicons.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/components/prism-core.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script>

<script defer src="/assets/js/fuji.min.js"></script>

</body>

</html>